# 布の物理特性設定ガイド

!!! note "ガイド情報"
    **所要時間**: 約60分 | **難易度**: 中級者向け | **重要度**: 品質向上の鍵

**このページの目的**: Marvelous Designerでの布の物理特性を理解し、VRChatに最適化された美しく動く衣装を制作します。

!!! success "このガイドで実現すること"
    - ✅ 自然で美しい布の動きの理解
    - ✅ VRChatでの軽量化と品質のベストバランス
    - ✅ 各種衣装タイプ別の最適設定マスター
    - ✅ パフォーマンス問題の予防と解決

!!! info "事前準備"
    - [Tシャツ制作ガイド](../garments/t-shirt.md)などで基本的な衣装制作を体験済み
    - Marvelous Designerの基本操作に慣れている
    - VRChatでのパフォーマンス概念を理解している

## 🎯 物理設定の重要性

### VRChatにおける物理設定の影響

!!! info "物理設定がVRChatに与える影響"

    **パフォーマンスへの影響**:
    - シミュレーション精度 ↔️ 処理負荷のトレードオフ
    - 他のユーザーからの見え方に直接影響
    - フレームレート・安定性への影響

    **見た目への影響**:
    - 布の自然な動き・重力感
    - アバターの動作との協調性
    - リアリティと美観のバランス

    **体験への影響**:
    - アバター操作時の違和感の有無
    - 他者との交流時の印象
    - VRChat内での存在感

## 📐 物理特性パラメータの基礎理解

### 主要パラメータ一覧

!!! example "Marvelous Designer Physical Property 主要項目"

    **基本物理特性**:
    1. **Particle Distance** - シミュレーション精度（最重要）
    2. **Bend** - 折り曲げ抵抗（布の硬さ）
    3. **Stretch** - 伸縮抵抗（布の伸び）
    4. **Shear** - せん断抵抗（布のねじれ）

    **材質特性**:
    5. **Air Resistance** - 空気抵抗
    6. **Density** - 密度（重さ）
    7. **Thickness** - 厚み
    8. **Friction** - 摩擦係数

    **シミュレーション品質**:
    9. **Self Collision** - 自己衝突検出
    10. **Collision Thickness** - 衝突検出厚み

### VRChat最適化の基本方針

!!! warning "VRChat最適化の鉄則"

    **軽量化優先項目**:
    - ✅ **Particle Distance**: 8-12 (精度と軽量化のバランス)
    - ✅ **Self Collision**: 必要最小限に限定
    - ✅ **Simulation Quality**: Medium推奨

    **品質保持項目**:
    - ✅ **Bend/Stretch/Shear**: 自然な動きのために調整
    - ✅ **Density**: 重力感のために適切に設定
    - ✅ **Air Resistance**: 微調整で動きの美しさを向上

## 🧵 衣装タイプ別推奨設定

### Tシャツ・カジュアルトップス

!!! example "Tシャツ最適設定"

    **基本設定 (Cotton Base)**:
    ```
    Fabric Preset: Cotton
    Particle Distance: 8-10
    Bend: 0.2-0.4
    Stretch: 0.1-0.2
    Shear: 0.1-0.2
    Air Resistance: 0.05-0.1
    Density: 0.2-0.3
    ```

    **調整ポイント**:
    - **ゆったりフィット**: Bend 0.2, Density 0.2
    - **タイトフィット**: Bend 0.4, Density 0.3
    - **薄手素材感**: Thickness 0.5mm
    - **厚手素材感**: Thickness 1.0-1.5mm

### スカート・ドレス

!!! example "スカート最適設定"

    **フレアスカート**:
    ```
    Fabric Preset: Silk (軽やか) / Cotton (普通)
    Particle Distance: 6-8 (動きの美しさ重視)
    Bend: 0.1-0.3 (軽やかな動き)
    Stretch: 0.05-0.1
    Shear: 0.05-0.1
    Air Resistance: 0.1-0.2 (風による動き)
    Density: 0.15-0.25
    ```

    **プリーツスカート**:
    ```
    Particle Distance: 8-10
    Bend: 0.3-0.5 (プリーツ保持)
    Stretch: 0.2-0.3
    Shear: 0.2-0.3
    Air Resistance: 0.05-0.1
    Density: 0.2-0.3
    ```

### 水着・タイトフィット衣装

!!! example "水着・レオタード最適設定"

    **基本設定**:
    ```
    Fabric Preset: Custom (専用設定)
    Particle Distance: 10-12 (安定性重視)
    Bend: 0.4-0.6 (フィット感)
    Stretch: 0.3-0.5 (伸縮性)
    Shear: 0.3-0.5
    Air Resistance: 0.01-0.03 (最小)
    Density: 0.3-0.4 (密着感)
    ```

    **特殊調整**:
    - **Self Collision**: 無効化（貫通防止より軽量化）
    - **Collision Thickness**: 最小値
    - **Friction**: 0.2-0.4 (肌との摩擦)

## ⚙️ 実践的な調整ワークフロー

### ステップ1: ベースライン設定

!!! example "調整開始時の基本手順"

    **1. プリセットの選択**:
    1. 衣装タイプに近い **Fabric Preset** を選択
    2. **Cotton** (万能), **Silk** (軽やか), **Denim** (硬め)
    3. プリセット適用後、個別調整を開始

    **2. Particle Distance の決定**:
    ```
    高品質 (6-8): ドレス、重要な見せ場衣装
    標準 (8-10): 通常のカジュアル衣装
    軽量化 (10-12): 複数衣装レイヤード時
    ```

    **3. 基本シミュレーションテスト**:
    - アバターに着用させて基本動作確認
    - 歩行、手の動き、座る動作での確認

### ステップ2: 細部調整

!!! example "見た目と動きの最適化"

    **Bend（硬さ）の調整**:
    ```
    0.1-0.2: 軽やか、風に舞うような動き
    0.2-0.4: 自然な布の動き (推奨範囲)
    0.4-0.6: やや硬め、形状保持重視
    0.6+: 硬い布、特殊衣装用
    ```

    **Density（重さ）の調整**:
    ```
    0.1-0.2: 軽い布（シフォン、シルク系）
    0.2-0.3: 標準的な布 (推奨)
    0.3-0.4: やや重い布（デニム、厚手コットン）
    0.4+: 重い布（コート、特殊衣装）
    ```

    **Air Resistance（空気抵抗）の調整**:
    ```
    0.01-0.05: 最小限（水着、タイトフィット）
    0.05-0.1: 標準 (通常衣装)
    0.1-0.2: やや大きめ（ふわっとした動き）
    0.2+: 大きめ（ドレス、特殊効果）
    ```

### ステップ3: VRChat最適化

!!! example "パフォーマンス最適化の実践"

    **Self Collision の最適化**:
    1. **基本方針**: 可能な限り無効化
    2. **有効化が必要な場合**:
       - ロングスカート、ドレスの重なり部分のみ
       - 袖と身体の重なり部分（必要に応じて）
    3. **Collision Thickness**: 最小値（0.5mm-1mm）

    **Simulation Quality の調整**:
    ```
    Low: 動作確認・テスト用
    Medium: VRChat推奨設定
    High: 最終調整・スクリーンショット用のみ
    ```

    **最適化確認項目**:
    - Unity でのFPS影響チェック
    - VRChat SDK Performance Rating 確認
    - Build & Test での動作確認

## 🎨 実用的な調整テクニック

### 問題別調整方法

!!! example "よくある問題の物理設定による解決"

    **「布が硬すぎる・不自然」**:
    ```
    Bend を下げる: 0.5 → 0.2-0.3
    Shear を下げる: 0.5 → 0.1-0.2
    Air Resistance を上げる: 0.05 → 0.1
    ```

    **「布が軽すぎる・浮く」**:
    ```
    Density を上げる: 0.2 → 0.3-0.4
    Air Resistance を下げる: 0.1 → 0.05
    Bend を適度に設定: 0.2-0.3
    ```

    **「動きが激しすぎる・暴れる」**:
    ```
    Particle Distance を上げる: 6 → 8-10
    Bend を上げる: 0.2 → 0.3-0.4
    Damping を有効化・調整
    ```

    **「貫通が多い」**:
    ```
    Collision Thickness を調整: 1mm → 2-3mm
    Self Collision を部分的に有効化
    Particle Distance を下げる (品質向上)
    ```

### 材質感別の表現技法

!!! example "リアルな材質感の表現"

    **シルク・サテン系**:
    ```
    Bend: 0.1-0.2 (しなやか)
    Density: 0.15-0.2 (軽やか)
    Air Resistance: 0.1-0.15 (風に舞う)
    Friction: 0.1-0.2 (滑らか)
    ```

    **デニム・厚手コットン系**:
    ```
    Bend: 0.4-0.6 (硬め)
    Density: 0.3-0.4 (重め)
    Air Resistance: 0.05 (風の影響小)
    Friction: 0.3-0.4 (粗い質感)
    ```

    **レザー・革系**:
    ```
    Bend: 0.6-0.8 (硬い)
    Stretch: 0.4-0.6 (伸びにくい)
    Density: 0.4-0.5 (重い)
    Air Resistance: 0.01-0.03 (最小)
    ```

## 📊 設定管理とバージョン管理

### 設定の保存・再利用

!!! example "効率的な設定管理"

    **プリセットの作成**:
    1. 満足のいく設定が完成したらプリセット保存
    2. **「File」** → **「Export」** → **「Physical Property」**
    3. 用途別ファイル名: 「VRChat_Tshirt_v1.phy」

    **プリセットの活用**:
    - 衣装タイプ別プリセット作成
    - プロジェクト間での設定共有
    - チーム作業での設定統一

    **設定記録の推奨形式**:
    ```
    衣装名: カジュアルTシャツ
    最終更新: 2025-08-08
    Particle Distance: 8
    Bend: 0.3, Stretch: 0.15, Shear: 0.15
    Density: 0.25, Air Resistance: 0.08
    VRChat Performance: Good
    特記事項: 軽量化重視、Self Collision無効
    ```

## ✅ 物理設定チェックリスト

!!! note "VRChat最適化物理設定完了チェック"

    **基本設定**:
    - [ ] 適切なFabric Presetから開始
    - [ ] Particle Distanceが8-12の範囲
    - [ ] Bend/Stretch/Shearが自然な範囲
    - [ ] DensityとAir Resistanceのバランス調整完了

    **最適化設定**:
    - [ ] Self Collisionは必要最小限
    - [ ] Collision Thicknessが適切
    - [ ] Simulation QualityがMedium以下
    - [ ] 不要な高負荷設定を無効化

    **品質確認**:
    - [ ] アバター基本動作で自然な動き
    - [ ] 座る・手を上げる動作で問題なし
    - [ ] 他のアバターとの干渉が最小限
    - [ ] VRChat Build & Testでエラーなし

    **パフォーマンス**:
    - [ ] Unity Scene ViewでFPS影響最小限
    - [ ] VRChat SDK Performance Rating Good以上
    - [ ] 複数衣装重ね着時も安定動作
    - [ ] 設定内容を記録・保存済み

## 🔧 トラブルシューティング

### 物理設定関連の問題解決

??? question "「シミュレーションが不安定・爆発する」"
    **対処法**:

    1. **Particle Distanceを上げる**: 6 → 10-12
    2. **Time Stepを調整**: Edit → Preferences → Simulation
    3. **極端な値をリセット**: 全パラメータを標準値に戻す
    4. **Self Collisionを無効化**: 一時的に全て無効にして確認

??? question "「VRChatでパフォーマンスが悪い」"
    **対処法**:

    1. **Particle Distance増加**: 最低8以上に設定
    2. **Self Collision最小化**: 本当に必要な部分のみ有効
    3. **Simulation Quality下げる**: High → Medium → Low
    4. **複雑な形状の簡略化**: 不要なパターンを統合

??? question "「布の動きが期待と違う」"
    **対処法**:

    1. **段階的調整**: 一つずつパラメータを変更して確認
    2. **リファレンス観察**: 実際の布や他の作品を参考に
    3. **プリセット再試行**: 異なるFabric Presetから開始
    4. **Air Resistanceの調整**: 動きの雰囲気を大きく左右

## 🌟 次のステップ

物理特性設定をマスターしました！

次は、より詳細なシミュレーション設定や最適化テクニックを学びましょう：

[パフォーマンス最適化ガイド →](optimization.md){ .md-button .md-button--primary }

[パフォーマンス最適化ガイド →](optimization.md){ .md-button }

または、学習した知識を活用して高度な衣装制作に挑戦：

[ドレス制作ガイド →](../garments/dress.md){ .md-button }

## 📚 理解を深めるための補足

### 物理シミュレーションの科学

**布の物理的特性**:
- **張力**: 布が引っ張られる力への抵抗
- **せん断**: 布がねじられる力への抵抗
- **曲げ**: 布が折り曲げられる力への抵抗
- **質量**: 重力と慣性に影響する物理量

**シミュレーションの近似**:
- Particle Distance = 解像度（細かいほど正確、重いほど高負荷）
- Time Step = 時間刻み（細かいほど安定、重いほど高負荷）
- Iteration = 計算回数（多いほど正確、重いほど高負荷）

### VRChatの技術的制約

**ネットワーク同期**:
- 物理演算結果は各クライアントで独立計算
- 精度が高すぎると同期ずれの原因
- 安定性・再現性が品質より重要

**パフォーマンス制約**:
- 他のユーザーのPC性能への配慮必要
- モバイル・Quest対応も考慮
- 「良い」は「完璧」の敵

!!! success "物理特性設定マスター完了！"
    おめでとうございます！VRChatに最適化された美しい布の動きを作る技術を習得しました。この知識は、どんな衣装制作にも応用できる重要な基盤です。

    実際の制作で様々な設定を試して、あなた独自の「最適解」を見つけてください！
